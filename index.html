<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy Birthday üéâ</title>
<style>
body {
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:linear-gradient(135deg,#ff9a9e,#fad0c4);
    font-family:Arial, sans-serif;
    overflow:hidden;
}

.container {
    text-align:center;
    background:white;
    padding:40px;
    border-radius:20px;
    box-shadow:0 10px 25px rgba(0,0,0,.2);
    animation:pop 1s;
    max-width:500px;
    width:90%;
    z-index:10;
    position:relative;
}

@keyframes pop {
    from {transform:scale(.5);opacity:0;}
    to {transform:scale(1);opacity:1;}
}

h1 {
    color:#ff4d6d;
}

button {
    padding:12px 25px;
    border:none;
    border-radius:20px;
    background:#ff4d6d;
    color:white;
    font-size:16px;
    cursor:pointer;
    margin:20px 0;
    transition:background 0.3s;
}

button:hover {
    background:#ff1f4b;
}

#msg {
    margin:20px 0;
    min-height:30px;
    font-size:18px;
    color:#333;
}

/* IMAGES SIDE BY SIDE - FIXED */
.images-row {
    display:flex;
    justify-content:center;
    gap:15px;
    margin-top:20px;
    flex-wrap:wrap;
}

.images-row img {
    width:150px;
    height:auto;
    max-height:200px;
    border-radius:10px;
    display:none;
    box-shadow:0 5px 15px rgba(0,0,0,.3);
    object-fit:cover;
}

.balloon {
    position:absolute;
    bottom:-100px;
    width:40px;
    height:50px;
    border-radius:50%;
    animation:float 6s infinite;
    z-index:1;
}

@keyframes float {
    0% {transform:translateY(0) rotate(0deg);}
    100% {transform:translateY(-100vh) rotate(20deg);}
}

.music-controls {
    position:fixed;
    top:20px;
    right:20px;
    z-index:100;
    background:white;
    padding:10px 15px;
    border-radius:25px;
    box-shadow:0 3px 15px rgba(0,0,0,.2);
    display:flex;
    align-items:center;
    gap:10px;
}

.music-btn {
    background:#ff4d6d;
    color:white;
    border:none;
    width:40px;
    height:40px;
    border-radius:50%;
    cursor:pointer;
    font-size:18px;
    display:flex;
    align-items:center;
    justify-content:center;
}

.music-btn.muted {
    background:#ccc;
}

#audioStatus {
    font-size:14px;
    color:#666;
    white-space:nowrap;
}

.instructions {
    background:#fff8e1;
    padding:10px 15px;
    border-radius:10px;
    margin:10px 0;
    border-left:4px solid #ffb74d;
    font-size:14px;
    color:#5d4037;
}
</style>
</head>

<body>

<div class="container">
    <h1>üéâ Happy Birthday Uzair üéÇ</h1>
    
    <div class="instructions">
        üîä Click the "Surprise" button first, then use music controls in top-right
    </div>
    
    <button onclick="startExperience()">Click for Surprise üéÅ</button>
    
    <h3 id="msg"></h3>
    
    <!-- Images in a row, side by side -->
    <div class="images-row">
        <img id="friendPic" src="./pic1.jpg" alt="Birthday photo 1">
        <img id="second" src="./pic2.jpg" alt="Birthday photo 2">
    </div>
</div>

<!-- Music Controls -->
<div class="music-controls" style="display:none;" id="musicControls">
    <button class="music-btn" id="playBtn" onclick="playMusic()">‚ñ∂Ô∏è</button>
    <button class="music-btn" id="pauseBtn" onclick="pauseMusic()">‚è∏Ô∏è</button>
    <button class="music-btn" id="muteBtn" onclick="toggleMute()">üîä</button>
    <span id="audioStatus">Ready</span>
</div>

<!-- Audio Element - Preload but don't autoplay -->
<audio id="bgMusic" preload="auto" loop>
   <source src="./song.mp3" type="audio/mpeg">
   <source src="./song.ogg" type="audio/ogg">
   Your browser does not support audio.
</audio>

<script>
let audioInitialized = false;
const bgMusic = document.getElementById('bgMusic');
bgMusic.volume = 0.7; // Set volume to 70%

function startExperience() {
    // Show message
    document.getElementById("msg").innerHTML = "‚ú® May you be mine forever! ‚ú®";
    
    // Show both images
    document.querySelectorAll('.images-row img').forEach(img => {
        img.style.display = 'block';
    });
    
    // Show music controls
    document.getElementById('musicControls').style.display = 'flex';
    document.getElementById('audioStatus').textContent = 'Click ‚ñ∂Ô∏è to play';
    
    // Initialize audio (required by browsers)
    initializeAudio();
    
    // Create balloons
    createBalloons();
    
    // Start speech
    playBirthdaySpeech();
}

function initializeAudio() {
    // This function is called on first user click to initialize audio
    if (!audioInitialized) {
        // Load and play a silent sound to "unlock" audio
        const silentAudio = new Audio("data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA=");
        silentAudio.volume = 0.001;
        
        silentAudio.play().then(() => {
            silentAudio.pause();
            silentAudio.currentTime = 0;
            audioInitialized = true;
            console.log("Audio unlocked!");
            
            // Now preload the actual music
            bgMusic.load();
            document.getElementById('audioStatus').textContent = 'Ready to play';
        }).catch(e => {
            console.log("Could not unlock audio:", e);
        });
    }
}

function playMusic() {
    if (!audioInitialized) {
        initializeAudio();
        setTimeout(playMusic, 500);
        return;
    }
    
    bgMusic.play().then(() => {
        document.getElementById('audioStatus').textContent = 'Playing...';
        console.log("Music started successfully!");
    }).catch(error => {
        console.error("Error playing music:", error);
        document.getElementById('audioStatus').textContent = 'Click to enable';
        
        // Show help message
        alert("Please click 'OK' then click the ‚ñ∂Ô∏è button again to play music.\nBrowsers require permission to play audio.");
    });
}

function pauseMusic() {
    bgMusic.pause();
    document.getElementById('audioStatus').textContent = 'Paused';
}

function toggleMute() {
    bgMusic.muted = !bgMusic.muted;
    const muteBtn = document.getElementById('muteBtn');
    muteBtn.textContent = bgMusic.muted ? 'üîá' : 'üîä';
    document.getElementById('audioStatus').textContent = bgMusic.muted ? 'Muted' : 'Playing...';
}

function createBalloons() {
    for(let i=0;i<25;i++){
        let b = document.createElement("div");
        b.className = "balloon";
        b.style.left = Math.random()*95 + "%";
        b.style.background = `hsl(${Math.random()*360},100%,60%)`;
        b.style.animationDuration = (Math.random()*3+4) + "s";
        b.style.animationDelay = Math.random()*2 + "s";
        document.body.appendChild(b);
    }
}

function playBirthdaySpeech() {
    if ('speechSynthesis' in window) {
        let speech = new SpeechSynthesisUtterance(
            "Happy 23rd Birthday Uzair! I love you so much. Your birthday is literally my Eid. I wanna celebrate your birthday like a festival but unfortunately we are living in long distance. Anyway I wanted to make you feel special in a long distance too. I want you to know that you are my whole world. No one can take your place. You are the bestest part of my life. May Allah bless you with happiness! May You become EO very soon and make me proud so I can successfully introduce you to my family. Once again happy birthday love"
        );
        speech.rate = 1.0;
        speech.pitch = 1.0;
        speechSynthesis.speak(speech);
    }
}

// Clean up balloons after animation
setInterval(() => {
    const balloons = document.querySelectorAll('.balloon');
    balloons.forEach(balloon => {
        const rect = balloon.getBoundingClientRect();
        if (rect.bottom < -50) {
            balloon.remove();
        }
    });
}, 1000);

// Keyboard shortcuts for music
document.addEventListener('keydown', (e) => {
    if (e.key === ' ') { // Space bar
        e.preventDefault();
        if (bgMusic.paused) {
            playMusic();
        } else {
            pauseMusic();
        }
    }
    if (e.key === 'm' || e.key === 'M') {
        toggleMute();
    }
});
</script>

</body>
</html>
